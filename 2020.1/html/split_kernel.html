

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Large application Splits into Multiple Kernels &mdash; Vitis Accel Examples&#39; Documentation 2019.2 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Systolic Array Implementation" href="systolic_array.html" />
    <link rel="prev" title="Shift Register" href="shift_register.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Vitis Accel Examples' Documentation
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="prerequisites.html">Prerequisites</a></li>
<li class="toctree-l1"><a class="reference internal" href="shells.html">Supported Platforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="compile_execute.html">Compilation and Execution</a></li>
<li class="toctree-l1"><a class="reference internal" href="cloud.html">Cloud Execution</a></li>
<li class="toctree-l1"><a class="reference internal" href="support.html">Support</a></li>
</ul>
<p class="caption"><span class="caption-text">Category of Examples</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="hello_world.html">Hello World</a></li>
<li class="toctree-l1"><a class="reference internal" href="host.html">Host</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="cpp.html">C++ Kernels</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="array_partition.html">Array Partition</a></li>
<li class="toctree-l2"><a class="reference internal" href="burst_rw.html">Burst Read/Write</a></li>
<li class="toctree-l2"><a class="reference internal" href="critical_path.html">Critical Path</a></li>
<li class="toctree-l2"><a class="reference internal" href="custom_datatype.html">Custom Data Type</a></li>
<li class="toctree-l2"><a class="reference internal" href="dataflow_stream.html">Dataflow Using HLS Stream</a></li>
<li class="toctree-l2"><a class="reference internal" href="dataflow_stream_array.html">Dataflow Using HLS Stream</a></li>
<li class="toctree-l2"><a class="reference internal" href="dependence_inter.html">Loop Iteration Dependency</a></li>
<li class="toctree-l2"><a class="reference internal" href="gmem_2banks.html">Global Memory Two Banks</a></li>
<li class="toctree-l2"><a class="reference internal" href="kernel_global_bandwidth.html">kernel_global</a></li>
<li class="toctree-l2"><a class="reference internal" href="lmem_2rw.html">Two Parallel Read/Write on Local Memory</a></li>
<li class="toctree-l2"><a class="reference internal" href="loop_pipeline.html">Loop Pipelining</a></li>
<li class="toctree-l2"><a class="reference internal" href="loop_reorder.html">Loop Reorder for better Performance</a></li>
<li class="toctree-l2"><a class="reference internal" href="partition_cyclicblock.html">Array Block and Cyclic Partitioning</a></li>
<li class="toctree-l2"><a class="reference internal" href="plram_access.html">PLRAM access</a></li>
<li class="toctree-l2"><a class="reference internal" href="shift_register.html">Shift Register</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Large application Splits into Multiple Kernels</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#supported-shells">SUPPORTED SHELLS</a></li>
<li class="toctree-l3"><a class="reference internal" href="#design-files">DESIGN FILES</a></li>
<li class="toctree-l3"><a class="reference internal" href="#command-line-arguments">COMMAND LINE ARGUMENTS</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="systolic_array.html">Systolic Array Implementation</a></li>
<li class="toctree-l2"><a class="reference internal" href="wide_mem_rw.html">Wide Memory Read/Write</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="sys_opt.html">System Optimization Kernels</a></li>
<li class="toctree-l1"><a class="reference internal" href="rtl.html">RTL Kernels</a></li>
<li class="toctree-l1"><a class="reference internal" href="ocl.html">OpenCL Kernels</a></li>
<li class="toctree-l1"><a class="reference internal" href="apps.html">Applications</a></li>
</ul>
<p class="caption"><span class="caption-text">Common Utilities</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="common.html">Common Files</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Vitis Accel Examples' Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="cpp.html">C++ Kernels</a> &raquo;</li>
        
      <li>Large application Splits into Multiple Kernels</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/split_kernel.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="large-application-splits-into-multiple-kernels">
<h1>Large application Splits into Multiple Kernels<a class="headerlink" href="#large-application-splits-into-multiple-kernels" title="Permalink to this headline">¶</a></h1>
<p>This is a multi-filter image processing application to showcase
effectiveness of Dataflow/Streams usage. This examples is intended to
help developers to break down the complex kernels into multiple
sub-functions using HLS Dataflow/Streams. It presents a way to
concurrently execute multiple functions with better area utilization
compared to a complex single kernel implementation. The main objective
of this example is to showcase a way to build a optimal FPGA design
which achieves maximum frequency with optimal resource utilization and
achieves better performance compared to single complex kernel
implementations.</p>
<p><strong>KEY CONCEPTS:</strong> Dataflow, Stream</p>
<p><strong>KEYWORDS:</strong> #pragma HLS DATAFLOW, hls::stream, #pragma HLS INLINE,
#pragma HLS ARRAY_PARTITION, #pragma HLS PIPELINE</p>
<div class="section" id="supported-shells">
<h2>SUPPORTED SHELLS<a class="headerlink" href="#supported-shells" title="Permalink to this headline">¶</a></h2>
<table class="docutils align-center">
<colgroup>
<col style="width: 38%" />
<col style="width: 32%" />
<col style="width: 30%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>SHELL</p></th>
<th class="head"><p>Board</p></th>
<th class="head"><p>Software Version</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>xilinx_u200_qdma</p></td>
<td><p>Xilinx Alveo U200</p></td>
<td><p>Vitis 2019.2</p></td>
</tr>
<tr class="row-odd"><td><p>xilinx_u280_xdma</p></td>
<td><p>Xilinx Alveo U280</p></td>
<td><p>Vitis 2019.2</p></td>
</tr>
<tr class="row-even"><td><p>xilinx_u250_qdma</p></td>
<td><p>Xilinx Alveo U250</p></td>
<td><p>Vitis 2019.2</p></td>
</tr>
<tr class="row-odd"><td><p>xilinx_u200_xdma</p></td>
<td><p>Xilinx Alveo U200</p></td>
<td><p>Vitis 2019.2</p></td>
</tr>
<tr class="row-even"><td><p>xilinx_u250_xdma</p></td>
<td><p>Xilinx Alveo U250</p></td>
<td><p>Vitis 2019.2</p></td>
</tr>
<tr class="row-odd"><td><p>xilinx_u280-es1_xdma</p></td>
<td><p>Xilinx Alveo U280</p></td>
<td><p>Vitis 2019.2</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="design-files">
<h2>DESIGN FILES<a class="headerlink" href="#design-files" title="Permalink to this headline">¶</a></h2>
<p>Application code is located in the src directory. Accelerator binary
files will be compiled to the xclbin directory. The xclbin directory is
required by the Makefile and its contents will be filled during
compilation. A listing of all the files in this example is shown below</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">data</span><span class="o">/</span><span class="n">car_128x128</span><span class="o">.</span><span class="n">bmp</span>
<span class="n">data</span><span class="o">/</span><span class="n">car_480x640</span><span class="o">.</span><span class="n">bmp</span>
<span class="n">src</span><span class="o">/</span><span class="n">boost_helper</span><span class="o">.</span><span class="n">h</span>
<span class="n">src</span><span class="o">/</span><span class="n">defns</span><span class="o">.</span><span class="n">h</span>
<span class="n">src</span><span class="o">/</span><span class="n">host</span><span class="o">.</span><span class="n">cpp</span>
<span class="n">src</span><span class="o">/</span><span class="n">median_helper</span><span class="o">.</span><span class="n">h</span>
<span class="n">src</span><span class="o">/</span><span class="n">sketch</span><span class="o">.</span><span class="n">cpp</span>
<span class="n">src</span><span class="o">/</span><span class="n">sketch_bad</span><span class="o">.</span><span class="n">cpp</span>
<span class="n">src</span><span class="o">/</span><span class="n">sketch_helper</span><span class="o">.</span><span class="n">h</span>
</pre></div>
</div>
</div>
<div class="section" id="command-line-arguments">
<h2>COMMAND LINE ARGUMENTS<a class="headerlink" href="#command-line-arguments" title="Permalink to this headline">¶</a></h2>
<p>Once the environment has been configured, the application can be
executed by</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">host</span> <span class="o">&lt;</span><span class="n">sketch_GOOD</span> <span class="n">XCLBIN</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">sketch_BAD</span> <span class="n">XCLBIN</span><span class="o">&gt;</span> <span class="o">./</span><span class="n">data</span><span class="o">/</span><span class="n">car_128x128</span><span class="o">.</span><span class="n">bmp</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="systolic_array.html" class="btn btn-neutral float-right" title="Systolic Array Implementation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="shift_register.html" class="btn btn-neutral float-left" title="Shift Register" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Xilinx Inc.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>